---
title: VIM common commands
subtitle: VIM's basic usage
date: 2017-06-14 15:12:14
author: Ricann
head-img: 
categories:  tools
tags:  
 - VIM
 - tools
keywords:  VIM, tools
comments: true
---


## 光标移动

| 命令 | 作用 | 命令 | 作用 |
| --- | --- | --- | --- |
| 0 | 到行头 | % | 匹配括号，包括 \(, {, \[ |
| $ | 到行尾 | e | 到单词结尾 |
| fx | 到本行下一个为x的字符处 | tx | 到本行下一个x前的字符处 |
| Fx | 到本行前一个为x的字符处 | Tx | 到本行前一个x后的字符处 |
| ,,w | EasyMotion插件 | ,,b | EasyMotion插件 |

<!--more-->

## 复制粘贴

| 命令 | 作用 | 命令 | 作用 |
| --- | --- | --- | --- |
| y0 | 复制到行头 | y% | 复制匹配括号内容，包括 \(, {, \[ |
| y$ | 复制到行尾 | ye | 复制到单词结尾 |
| nyG | 从当前行复制到第n行 | yG | 复制到档尾 |
| ctrl-v y | 复制选中块 | v y | 复制选中区域 |

复制到系统剪切板：

* :reg ： 查看寄存器，下面的reg是寄存器的名字
* 复制 ： 上面命令之前加上"reg
* 粘贴 ： 使用命令"regp

## 剪切删除

| 命令 | 作用 | 命令 | 作用 |
| --- | --- | --- | --- |
| d0 | 删除到行头 | d% | 删除匹配括号内容，包括 \(, {, \[ |
| d$ | 删除到行尾 | de | 删除到单词结尾 |
| ndG | 从当前行删除到第n行 | dG | 删除到档尾 |
| ctrl-v d | 删除选中块 | v d | 删除选中区域 |

删除到系统剪切板：

* :reg ： 查看寄存器，下面的reg是寄存器的名字
* 删除 ： 上面命令之前加上"reg
* 粘贴 ： 使用命令"regp

## 查找

大小写设置：

* set ignorecase ： 忽略大小写
* set noignorecase ： 不忽略大小写

？str ： 从当前位置往前搜索

vimgrep（可以简写为vim）搜索总结：

| 命令 | 作用 |
| --- | --- |
| vim /pattern/ % | 在当前打开文件中查找 |
| vim /pattern/ \* | 在当前目录下查找所有 |
| vim /pattern/ \*\* | 在当前目录及子目录下查找所有 |
| vim /pattern/ \*.c | 查找当前目录下所有.c文件 |
| vim /pattern/ _\*/_ | 只查找子目录 |
| vim /pattern/ \*.c | 查找当前目录下所有.c文件 |
| cn | 下一个 |
| cp | 上一个 |
| cw | 打开quickfix |
| copen | 打开quickfix |
| cclose | 关闭quickfix |
| help vimgrep | 查看vimgrep帮助 |

## 更改替换

| 命令 | 作用 | 命令 | 作用 |
| --- | --- | --- | --- |
| c0 | 更改到行头 | c% | 更改匹配括号内容，包括 \(, {, \[ |
| c$ | 更改到行尾 | ce | 更改到单词结尾 |
| r | 替换当前光标字符 | R | 从当前光标开始，替换多个字符 |

批量替换命令，g放在命令末尾，表示对搜索字符串的每次出现进行替换，g放在命令开头，表示对正文中所有包含搜索字符串的行进行替换操作：

* :s/old/new/g ：替换当前行中的每个匹配串
* :\#,\#s/old/new/g ：替换两行之间出现的每个匹配串
* :%s/old/new/g ：替换整个文件中的每个匹配串
* :%s/old/new/gc ： 替换整个文件中的每个匹配串，替换时进行提示
* :g/^$/d ：删除所有空行

多文件替换：

* args \*.c：载入文件列表
* args \*\*/\*.c：载入文件列表，包含子目录
* argdo %s/xxx/yyy/g \| update：替换并写入文件

## 重新载入

1.重新载入当前文件

* e
* e! ：放弃修改，强制重新载入

2.重新载入所有打开的文件

* bufdo e
* bufdo e!

## 打开保存文件

横向分屏打开多个文件

> vim -o f1 f2 f3

纵向分屏打开多个文件

> vim -O f1 f2 f3

在vim中继续打开其他文件

> e或者open

关闭除当前文件外的其他文件

> only

## 折叠

* zi ：打开关闭折叠
* zc ：关闭折叠
* zm ：关闭折叠
* zM ：关闭所有
* zr ：打开
* zR ：打开所有
* zfnG ：从当前行到第n行创建一个折叠

## 书签

| 命令 | 作用 |
| --- | --- |
| m{a-zA-Z} | 保存书签，小写的是文件书签，大写的是全局书签（可在多个文件之间跳转） |
| '{a-zA-Z} | 跳转到某个书签 |
| '' | 跳转到最后一次跳转的位置 |
| marks | 显示系统全部书签 |
| delm{a~zA~Z} | 删除书签 |

## 标签页

| 命令 | 作用 |
| --- | --- |
| vim -p filename | 启动文件时打开标签页 |
| tabnew | 在当前标签页之后打开带空窗口的新标签页 |
| tabc | 关闭当前标签页 |
| gt | 转到下一个标签页 |
| gT | 转到前一个标签页 |
| tabn num | 转到num号标签页 |
| tabfir | 转到第一个标签页 |
| tabl | 转到最后一个标签页 |
| tabs | 列出所有标签页 |

## 多窗口

| 命令 | 作用 |
| --- | --- |
| split | 水平窗口打开文件 |
| vsplit | 垂直窗口打开文件 |
| res\(ize\) num | 显示行数调整为num行 |
| res\(ize\)+num | 把当前窗口高度增加num行 |
| res\(ize\)-num | 把当前窗口高度减小num行 |
| vertical res\(ize\) num | 显示列数调整为num列 |
| vertical res\(ize\)+num | 把当前窗口宽度增加num列 |
| vertical res\(ize\)-num | 把当前窗口宽度减小num列 |
| ls | 列出当前buffer内容，即打开了哪些文件 |
| buffer n | 打开编号为n的buffer |
| bdelete n | 删除编号为n的buffer |

## 区域选择

| 命令 | 作用 |
| --- | --- |
| vi{ "'\)\]} } | 选中引号"'\)\]}中的内容，不包含"'\)\]} |
| va{ "'\)\]} } | 选中引号"'\)\]}中的内容，包含"'\)\]} |
| viw | 选中当前单词 |
| vaw | 选中当前单词 |

## 块操作

* ctrl+v开启块操作模式
* hjkl方向键选择区域
* 0,^,$等选择到行的哪个地方
* I，A输入插入命令
* ESC退出插入模式，使刚才输入的字符插入到每一行中

## 录制宏

以在行尾添加字符串hello为例：

* qreg开始录制宏（reg是寄存器名字）
* $移动光标到行尾
* a进入输入模式，输入hello
* q退出输入，j移动到下一行
* q退出宏录制
* 100@reg把当前光标下的一百行执行宏

## 常用外部命令

| 命令 | 作用 |
| --- | --- |
| %!xxd | 以二进制形式打开此文件（百分号的作用应该是把命令执行结果写入本文件） |
| %!xxd -r | 转换回原文件 |


